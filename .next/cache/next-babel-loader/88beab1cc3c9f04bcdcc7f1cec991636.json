{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport React, { Component } from 'react';\nimport axios from 'axios'; // react bootstrap components\n\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button'; // import { Link, Redirect } from \"react-router-dom\";\n\nimport Link from 'next/link'; // user created components\n\nimport Dashboard from '../src/components/Dashboard';\nimport Error from '../src/components/Error';\n\nvar Signinform = /*#__PURE__*/function (_Component) {\n  _inherits(Signinform, _Component);\n\n  function Signinform(props) {\n    var _this;\n\n    _classCallCheck(this, Signinform);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signinform).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (e) {\n      axios.get(\"http://localhost:3000/users?loginId=\".concat(_this.state.username, \"&password=\").concat(_this.state.password)).then(function (response) {\n        // handle success\n        console.log(response.data);\n\n        if (response.data.length) {\n          _this.setState({\n            isAuthenticated: Boolean(response.data.length),\n            userDetails: {\n              'userId': response.data[0]['userId'],\n              'fullName': response.data[0]['fullName']\n            }\n          }, function () {\n            sessionStorage.setItem('userDetails', JSON.stringify(_this.state.userDetails));\n\n            _this.props.history.push('/dashboard', _this.state.userDetails);\n\n            localStorage.setItem('userId', _this.state.username.userId);\n          });\n        } else {\n          _this.setState({\n            wrongCredential: !Boolean(response.data.length)\n          });\n        }\n      })[\"catch\"](function (error) {\n        // handle error\n        console.log(error);\n      });\n      e.preventDefault();\n    });\n\n    _this.state = {\n      username: '',\n      password: '',\n      userDetails: {},\n      wrongCredential: false,\n      isAuthenticated: false,\n      fullName: 'test'\n    };\n    return _this;\n  }\n\n  _createClass(Signinform, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          isAuthenticated = _this$state.isAuthenticated,\n          wrongCredential = _this$state.wrongCredential,\n          userDetails = _this$state.userDetails;\n      return isAuthenticated ? 'test' : React.createElement(React.Fragment, null, React.createElement(\"h1\", null, \"Sign In\"), wrongCredential && React.createElement(Error, {\n        errorMsg: \"That username/password is incorrect. Try again!\"\n      }), React.createElement(Form, {\n        onSubmit: this.handleSubmit\n      }, React.createElement(Form.Group, {\n        controlId: \"formBasicEmail\"\n      }, React.createElement(Form.Label, null, \"User Name\"), React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Enter username\",\n        name: \"username\",\n        onChange: this.handleChange\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicPassword\"\n      }, React.createElement(Form.Label, null, \"Password\"), React.createElement(Form.Control, {\n        type: \"password\",\n        placeholder: \"Password\",\n        name: \"password\",\n        onChange: this.handleChange\n      })), React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        style: {\n          marginRight: '10px'\n        }\n      }, \"Submit\"), React.createElement(Link, {\n        to: \"/signupform\"\n      }, \"Sign Up\")));\n    }\n  }]);\n\n  return Signinform;\n}(Component);\n\nexport default Signinform;","map":{"version":3,"sources":["/Users/nirkumar5/Documents/2020/reactjs/howathon2020/pages/index.js"],"names":["React","Component","axios","Form","Button","Link","Dashboard","Error","Signinform","props","e","setState","target","name","value","get","state","username","password","then","response","console","log","data","length","isAuthenticated","Boolean","userDetails","sessionStorage","setItem","JSON","stringify","history","push","localStorage","userId","wrongCredential","error","preventDefault","fullName","handleSubmit","handleChange","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios';\n\n// react bootstrap components\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button'\n// import { Link, Redirect } from \"react-router-dom\";\nimport Link from 'next/link'\n\n// user created components\nimport Dashboard from '../src/components/Dashboard';\nimport Error from '../src/components/Error';\n\nclass Signinform extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n            userDetails: {},\n            wrongCredential: false,\n            isAuthenticated: false,\n            fullName: 'test'\n        }\n    }\n\n    handleChange = (e) => {\n        this.setState({[e.target.name]: e.target.value})\n    }\n\n    handleSubmit = (e) => {\n        axios.get(\n                `http://localhost:3000/users?loginId=${this.state.username}&password=${this.state.password}`\n                )\n                .then( (response) => {\n                    // handle success\n                    console.log(response.data);\n                    if(response.data.length) {\n                    this.setState({\n                            isAuthenticated: Boolean(response.data.length), \n                            userDetails: {'userId': response.data[0]['userId'], 'fullName': response.data[0]['fullName'] }\n                        }, () => {\n                            sessionStorage.setItem('userDetails', JSON.stringify(this.state.userDetails));\n                            this.props.history.push('/dashboard', this.state.userDetails)\n                            localStorage.setItem('userId', this.state.username.userId)\n                        });\n                    } else {\n                        this.setState({\n                            wrongCredential: !Boolean(response.data.length),\n                        })\n                    }\n                })\n                .catch(function (error) {\n                    // handle error\n                    console.log(error);\n                })\n        e.preventDefault();\n    }\n\n\n    render() {\n        const { isAuthenticated, wrongCredential, userDetails } = this.state;\n        return (\n            \n            \n            isAuthenticated ? 'test'\n            : \n                <>\n                    <h1>\n                        Sign In\n                    </h1>\n                    {wrongCredential &&  <Error errorMsg=\"That username/password is incorrect. Try again!\"/>}\n                    <Form onSubmit={this.handleSubmit}>\n                    <Form.Group controlId=\"formBasicEmail\">\n                        <Form.Label>User Name</Form.Label>\n                        <Form.Control type=\"text\" placeholder=\"Enter username\" name=\"username\" onChange={this.handleChange} />\n                    </Form.Group>\n\n                    <Form.Group controlId=\"formBasicPassword\">\n                        <Form.Label>Password</Form.Label>\n                        <Form.Control type=\"password\" placeholder=\"Password\" name=\"password\" onChange={this.handleChange} />\n                    </Form.Group>\n                    <Button variant=\"primary\" type=\"submit\" style={{marginRight: '10px'}}>\n                        Submit\n                    </Button>\n                    <Link to=\"/signupform\">Sign Up</Link>\n                    </Form>\n                </>\n            )\n        }\n}\n\nexport default Signinform;"]},"metadata":{},"sourceType":"module"}